# 관리자 시스템 사용 가이드

**구미디지털적층산업사업협동조합 웹사이트 관리자 매뉴얼**

---

## 📋 목차

1. [개요](#개요)
2. [접속 방법](#접속-방법)
3. [주요 기능](#주요-기능)
4. [소식 관리](#소식-관리)
5. [보안 설정](#보안-설정)
6. [문제 해결](#문제-해결)

---

## 🎯 개요

관리자 대시보드는 조합소식(뉴스)을 직접 관리할 수 있는 웹 기반 관리 시스템입니다.

### 주요 특징
- ✅ **간편한 인증**: 비밀번호 기반 로그인
- ✅ **실시간 관리**: 소식 작성/수정/삭제
- ✅ **리치 에디터**: Quill.js 기반 WYSIWYG 에디터
- ✅ **안전한 보안**: JWT 토큰 기반 세션 관리
- ✅ **반응형 디자인**: 모바일/태블릿/데스크톱 지원

---

## 🔐 접속 방법

### 1. 관리자 로그인 페이지 접속

```
https://[도메인]/admin/login
```

### 2. 로그인 정보 입력

**기본 비밀번호**: `admin1234`

> ⚠️ **중요**: 첫 배포 후 반드시 비밀번호를 변경하세요!

### 3. 로그인 성공

로그인에 성공하면 자동으로 관리자 대시보드로 이동합니다.

---

## 🎛️ 주요 기능

### 대시보드 구성

```
┌─────────────────────────────────────────────┐
│  관리자 대시보드                              │
├─────────────────────────────────────────────┤
│  [홈페이지]  [로그아웃]                       │
├─────────────────────┬───────────────────────┤
│                     │                       │
│   소식 목록         │   작성/수정 폼         │
│   (왼쪽)            │   (오른쪽)            │
│                     │                       │
│  - 최근 50개 표시   │  - 카테고리 선택       │
│  - 수정/삭제 버튼   │  - 제목 입력          │
│  - 카테고리 표시    │  - 리치 에디터        │
│  - 고정 표시        │  - 상단 고정 옵션     │
│                     │                       │
└─────────────────────┴───────────────────────┘
```

### 네비게이션

- **홈페이지**: 메인 웹사이트로 이동
- **로그아웃**: 세션 종료 및 로그인 페이지로 이동

---

## 📝 소식 관리

### 새 소식 작성

1. **[새 소식 작성]** 버튼 클릭
2. 폼 작성:
   - **카테고리**: 공지사항, 보도자료, 행사, 수상 중 선택
   - **제목**: 소식 제목 입력
   - **작성자**: 기본값 "관리자" (변경 가능)
   - **내용**: 리치 에디터로 내용 작성
   - **상단 고정**: 중요 소식인 경우 체크
3. **[저장]** 버튼 클릭

### 소식 수정

1. 소식 목록에서 **[수정]** (연필 아이콘) 클릭
2. 폼에 기존 내용이 자동으로 채워짐
3. 내용 수정 후 **[저장]** 클릭

### 소식 삭제

1. 소식 목록에서 **[삭제]** (휴지통 아이콘) 클릭
2. 확인 메시지에서 **[확인]** 클릭

---

## 🎨 리치 텍스트 에디터 사용법

### 지원 기능

에디터 상단 툴바에서 다음 기능을 사용할 수 있습니다:

| 기능 | 설명 |
|------|------|
| **Bold** | 굵게 |
| **Italic** | 기울임 |
| **Underline** | 밑줄 |
| **Strike** | 취소선 |
| **Blockquote** | 인용구 |
| **Code Block** | 코드 블록 |
| **Header 1/2** | 제목 크기 |
| **List** | 순서 있는/없는 목록 |
| **Color** | 글자 색상 |
| **Background** | 배경 색상 |
| **Link** | 링크 삽입 |
| **Image** | 이미지 삽입 (URL) |
| **Clean** | 서식 제거 |

### 이미지 삽입 방법

1. 툴바에서 이미지 아이콘 클릭
2. 이미지 URL 입력
   - 추천: Cloudflare Images, Imgur 등의 이미지 호스팅 사용
   - 예시: `https://page.gensparksite.com/v1/base64_upload/...`

---

## 🔒 보안 설정

### 비밀번호 변경

관리자 비밀번호는 환경변수로 관리됩니다.

#### Cloudflare Pages에서 설정

1. Cloudflare Dashboard 접속
2. **Pages** → **프로젝트** 선택
3. **Settings** → **Environment variables**
4. 새 변수 추가:
   ```
   ADMIN_PASSWORD = 새로운비밀번호
   ```
5. **[Save]** 후 재배포

#### 로컬 개발 환경

`.dev.vars` 파일 생성:

```bash
# .dev.vars
ADMIN_PASSWORD=새로운비밀번호
JWT_SECRET=랜덤한비밀키문자열
```

### JWT Secret 변경 (선택사항)

더 강력한 보안을 원한다면:

```bash
JWT_SECRET=랜덤한-매우-긴-비밀키-문자열-2025
```

---

## 🛡️ 접근 권한

### 관리자 영역 보호

다음 경로는 인증이 필요합니다:

- `/admin/dashboard` - 관리자 대시보드
- `/api/admin/*` - 관리자 API 엔드포인트

### 세션 유지 시간

- **기본값**: 24시간
- 24시간 후 자동 로그아웃되며 다시 로그인 필요

---

## ❓ 문제 해결

### Q1. 로그인이 안 돼요

**확인 사항**:
- 비밀번호가 정확한지 확인 (기본값: `admin1234`)
- 브라우저 쿠키가 활성화되어 있는지 확인
- 시크릿 모드/프라이빗 브라우징 사용 시 쿠키 차단 확인

### Q2. 소식이 저장되지 않아요

**원인**:
- D1 데이터베이스 연결 문제
- 필수 항목 누락 (카테고리, 제목, 내용)

**해결**:
1. 모든 필수 항목을 입력했는지 확인
2. 브라우저 콘솔(F12)에서 에러 메시지 확인
3. 데이터베이스 마이그레이션 실행 확인

### Q3. 이미지가 표시되지 않아요

**원인**:
- 잘못된 이미지 URL
- HTTPS가 아닌 HTTP URL 사용
- CORS 문제

**해결**:
1. 이미지 URL이 정확한지 확인
2. HTTPS URL 사용
3. 공개 접근 가능한 이미지 호스팅 사용

### Q4. 대시보드가 느려요

**원인**:
- 소식 개수가 너무 많음 (50개 이상)
- 큰 이미지 사용

**해결**:
1. 오래된 소식 삭제
2. 이미지 최적화 (권장 크기: 1920x1080 이하)

---

## 🚀 고급 기능 (개발자용)

### API 엔드포인트

#### 로그인
```http
POST /api/admin/login
Content-Type: application/json

{
  "password": "admin1234"
}
```

#### 소식 생성
```http
POST /api/admin/notices
Cookie: admin_token=<JWT>
Content-Type: application/json

{
  "category": "공지사항",
  "title": "제목",
  "content": "<p>내용</p>",
  "author": "관리자",
  "is_pinned": false
}
```

#### 소식 수정
```http
PUT /api/admin/notices/:id
Cookie: admin_token=<JWT>
Content-Type: application/json

{
  "category": "공지사항",
  "title": "수정된 제목",
  "content": "<p>수정된 내용</p>",
  "author": "관리자",
  "is_pinned": true
}
```

#### 소식 삭제
```http
DELETE /api/admin/notices/:id
Cookie: admin_token=<JWT>
```

---

## 📊 데이터베이스 구조

### notices 테이블

| 컬럼 | 타입 | 설명 |
|------|------|------|
| id | INTEGER | 고유 ID (자동 생성) |
| category | TEXT | 카테고리 (공지사항/보도자료/행사/수상) |
| title | TEXT | 제목 |
| content | TEXT | 내용 (HTML) |
| author | TEXT | 작성자 |
| views | INTEGER | 조회수 (기본값: 0) |
| is_pinned | BOOLEAN | 상단 고정 여부 |
| created_at | DATETIME | 작성일시 |
| updated_at | DATETIME | 수정일시 |

---

## 📞 기술 지원

문제가 지속되거나 도움이 필요한 경우:

- **이메일**: info@gumidigital.co.kr
- **전화**: 054-123-4567
- **GitHub**: https://github.com/seojeongju/gumi-digital-coop-website

---

## 📚 참고 자료

- **Hono 문서**: https://hono.dev/
- **Cloudflare D1**: https://developers.cloudflare.com/d1/
- **Quill.js**: https://quilljs.com/

---

**마지막 업데이트**: 2025-10-24  
**버전**: 1.0.0  
**작성자**: AI Assistant
