# 🎯 gdamic.kr 도메인 연결 작업 - 현재 상황 요약

**작성 날짜**: 2025-11-10  
**프로젝트**: gumi-digital-coop-website (구미디지털협동조합 웹사이트)  
**목표**: gdamic.kr 커스텀 도메인을 Cloudflare Pages에 연결

---

## ✅ 완료된 작업

### 1. GitHub 및 Cloudflare Pages 배포
- ✅ GitHub 저장소: `seojeonggyu/gumi-digital-coop-website`
- ✅ Cloudflare Pages 프로젝트 생성 및 배포 완료
- ✅ 배포 URL: `gumi-digital-coop-website.pages.dev`
- ✅ 자동 배포 설정 완료 (GitHub Actions)

### 2. 후이즈(Whois) DNS 설정
- ✅ DNS 관리 방식: **후이즈 기본 네임서버 유지**
- ✅ CNAME 레코드 추가 완료:
  - **www.gdamic.kr** → `gumi-digital-coop-website.pages.dev` (TTL: 3600)
  - **gdamic.kr** (루트) → `gumi-digital-coop-website.pages.dev` (TTL: 3600)
- ✅ DNS 전파: **완료** (dnschecker.org로 확인함)

### 3. Cloudflare Pages 커스텀 도메인
- ✅ **www.gdamic.kr** 추가 완료
  - 상태: **Active** 🟢
  - SSL: **Enabled** 🔒
- ❌ **gdamic.kr** (루트) 추가 실패
  - 이유: Cloudflare가 "DNS 전체 이관" 요구
  - 화면: "Transfer DNS management" 메시지 표시

---

## 🚧 현재 문제 상황

### 문제: URL 포워딩과 CNAME 충돌

**후이즈 포워딩 서비스 화면에서 에러 발생:**
```
CNAME 이 설정되어 있으므로 포워딩/파킹 서비스를 이용하실 수 없습니다.
```

**원인:**
- gdamic.kr (루트 도메인)에 CNAME 레코드가 존재
- URL 포워딩 서비스는 CNAME과 동시 사용 불가
- DNS 표준 제약사항

---

## 🎯 다음 단계 (진행해야 할 작업)

### STEP 1: 후이즈 DNS 호스트 관리 접속
**현재 위치**: 네임서버 고급설정 화면

**해야 할 일:**
1. **"DNS 호스트 설정"** 버튼 클릭
2. CNAME 레코드 목록 화면으로 이동

---

### STEP 2: gdamic.kr (루트) CNAME 레코드 삭제

**삭제할 레코드:**
```
호스트명: gdamic.kr (또는 @ 또는 빈 칸)
타입: CNAME
값: gumi-digital-coop-website.pages.dev
```

**유지할 레코드:**
```
호스트명: www.gdamic.kr (또는 www)
타입: CNAME
값: gumi-digital-coop-website.pages.dev
```

**삭제 방법:**
1. DNS 호스트 관리 화면에서 CNAME 레코드 목록 확인
2. **gdamic.kr (루트 도메인)** 행만 선택
3. "해지" 또는 "삭제" 옵션 선택
4. "저장" 또는 "신청한 추가" 버튼 클릭
5. **주의**: www.gdamic.kr은 절대 삭제하지 말 것!

---

### STEP 3: URL 포워딩 설정

**CNAME 삭제 후 다시 포워딩 서비스로 이동:**

**설정 내용:**
```
소스 도메인: gdamic.kr
대상 URL: https://www.gdamic.kr
포워딩 타입: 301 (영구 리다이렉트)
경로 유지: 체크 (옵션)
```

**포워딩 서비스 접근 경로:**
- 후이즈 도메인 관리
- → 부가서비스
- → 포워딩 서비스
- → URL 포워딩 설정

---

## 📋 최종 목표 구성

### DNS 레코드 (후이즈):
| 호스트 | 타입 | 값 | 용도 |
|--------|------|-----|------|
| www | CNAME | gumi-digital-coop-website.pages.dev | 직접 연결 |
| @ (루트) | URL 포워딩 | https://www.gdamic.kr | 리다이렉트 |

### Cloudflare Pages 커스텀 도메인:
| 도메인 | 상태 | 비고 |
|--------|------|------|
| www.gdamic.kr | ✅ Active + SSL | 이미 완료 |
| gdamic.kr | - | 추가 안 함 (URL 포워딩 사용) |

### 사용자 경험:
```
사용자 입력: gdamic.kr
  ↓
후이즈 URL 포워딩: 301 리다이렉트
  ↓
브라우저 주소: https://www.gdamic.kr
  ↓
Cloudflare Pages: 웹사이트 로딩 (SSL)
```

---

## 🔧 기술 정보

### 프로젝트 구조:
```
/home/user/webapp/
├── src/
│   ├── pages/
│   ├── components/
│   └── ...
├── public/
├── migrations/
│   ├── 0001_create_notices_table.sql
│   ├── 0002_add_notices_indexes.sql
│   ├── 0003_create_resources_table.sql
│   ├── 0004_create_quote_requests.sql
│   └── 0005_create_contact_messages.sql
├── wrangler.toml
└── package.json
```

### Cloudflare 설정:
- **계정**: 사용자 Cloudflare 계정
- **프로젝트**: gumi-digital-coop-website
- **빌드 명령**: `npm run build`
- **출력 디렉토리**: `dist`
- **D1 데이터베이스**: 아직 마이그레이션 실행 안 됨 (도메인 연결 후 진행 예정)

---

## 📸 화면 네비게이션 가이드

### 후이즈 DNS 호스트 관리 접근:

**방법 1 (현재 위치에서):**
```
네임서버 고급설정 화면 (현재)
  ↓
[DNS 호스트 설정] 버튼 클릭
  ↓
DNS 호스트 관리 화면
  ↓
CNAME 레코드 목록 표시
```

**방법 2 (메인에서):**
```
후이즈 도메인 목록
  ↓
gdamic.kr 클릭
  ↓
네임서버 변경 버튼
  ↓
네임서버 고급설정
  ↓
DNS 호스트 설정
```

### URL 포워딩 접근:
```
후이즈 도메인 목록
  ↓
gdamic.kr 클릭
  ↓
부가서비스 메뉴
  ↓
포워딩 서비스
  ↓
URL 포워딩 설정
```

---

## ⚠️ 주의사항

### 1. CNAME 레코드 삭제 시:
- ❌ **www.gdamic.kr 절대 삭제 금지!**
- ✅ **gdamic.kr (루트)만 삭제**
- 이유: www는 Cloudflare Pages와 연결되어 Active 상태

### 2. DNS 전파 시간:
- CNAME 삭제: 즉시 적용 (TTL 3600초 = 1시간 내)
- URL 포워딩: 즉시 적용

### 3. 테스트 방법:
- www.gdamic.kr 접속: 직접 로딩 (빠름)
- gdamic.kr 접속: 301 리다이렉트 → www로 이동

---

## 📞 후이즈 고객센터 정보

만약 UI에서 막히면 고객센터에 문의:

**연락처**: 1544-2424

**요청 사항**:
```
"gdamic.kr 도메인에 설정된 루트 도메인(@) CNAME 레코드를 
삭제하고, URL 포워딩을 설정하고 싶습니다.

- 삭제: gdamic.kr → gumi-digital-coop-website.pages.dev (CNAME)
- 유지: www.gdamic.kr → gumi-digital-coop-website.pages.dev (CNAME)
- 추가: gdamic.kr → https://www.gdamic.kr (URL 포워딩, 301)
"
```

---

## 🎯 다음 세션에서 해야 할 일 (순서대로)

### 1단계: DNS 설정 완료
- [ ] 후이즈 DNS 호스트 관리 접속
- [ ] gdamic.kr (루트) CNAME 레코드 삭제
- [ ] www.gdamic.kr CNAME 유지 확인
- [ ] 변경사항 저장

### 2단계: URL 포워딩 설정
- [ ] 후이즈 포워딩 서비스 접속
- [ ] gdamic.kr → https://www.gdamic.kr URL 포워딩 추가
- [ ] 301 리다이렉트 옵션 선택
- [ ] 설정 저장

### 3단계: 테스트
- [ ] https://www.gdamic.kr 접속 테스트 (직접 로딩)
- [ ] http://gdamic.kr 접속 테스트 (리다이렉트 확인)
- [ ] https://gdamic.kr 접속 테스트 (리다이렉트 확인)
- [ ] 모든 페이지 네비게이션 테스트

### 4단계: D1 데이터베이스 마이그레이션 (도메인 완료 후)
- [ ] Cloudflare D1 콘솔 접속
- [ ] 5개 마이그레이션 파일 순서대로 실행:
  1. `0001_create_notices_table.sql`
  2. `0002_add_notices_indexes.sql`
  3. `0003_create_resources_table.sql`
  4. `0004_create_quote_requests.sql`
  5. `0005_create_contact_messages.sql`

### 5단계: 최종 기능 테스트
- [ ] 공지사항 기능 테스트
- [ ] 자료실 기능 테스트
- [ ] 견적 요청 폼 테스트
- [ ] 문의하기 폼 테스트
- [ ] 관리자 패널 테스트

---

## 📚 참고 문서

프로젝트에 작성된 가이드 문서들:

1. **후이즈_DNS_설정_가이드.md** - 완전한 후이즈 DNS 설정 가이드
2. **gdamic_kr_연동_간단_가이드.md** - 간단 요약 가이드
3. **gdamic_kr_최종_설정값.txt** - DNS 값 정리
4. **후이즈_올바른_설정_방법.md** - 네임서버 vs DNS 레코드 설명
5. **DOMAIN_CONNECTION_READY.md** - 일반 도메인 연결 가이드

---

## 💡 요약

**현재 상태**: www.gdamic.kr은 완벽하게 작동 중 (Active + SSL)

**해결 과제**: 
1. gdamic.kr (루트) CNAME 레코드 삭제
2. gdamic.kr → www.gdamic.kr URL 포워딩 설정

**최종 결과**: 
- 사용자가 어떤 주소로 접속하든 www.gdamic.kr로 이동
- SSL 보안 연결
- SEO 최적화 (301 리다이렉트)

---

## 🔗 유용한 링크

- Cloudflare 대시보드: https://dash.cloudflare.com
- Workers & Pages: https://dash.cloudflare.com/?to=/:account/workers-and-pages
- DNS 전파 확인: https://dnschecker.org
- 후이즈: https://whois.co.kr
- GitHub 저장소: https://github.com/seojeonggyu/gumi-digital-coop-website

---

**작성자 노트**: 
이 문서는 새로운 세션에서 작업을 이어서 할 수 있도록 작성되었습니다.
가장 중요한 다음 단계는 "DNS 호스트 설정" 버튼을 클릭하여 
gdamic.kr (루트) CNAME 레코드를 삭제하는 것입니다.
